<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Generator - Educational Content</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <h1>
                <img src="{{ url_for('static', filename='images/tutero-logo.png') }}" alt="Tutero Logo"
                    class="header-logo">
                Tutero Image Generator
            </h1>
        </header>

        <main>
            <div class="generator-card">
                <div class="form-section">
                    <!-- Image Type Selection -->
                    <div class="selection-section">
                        <label class="section-label">1. Select Image Type</label>
                        <div class="tile-grid" id="category-grid">
                            <div class="tile" data-value="subtopic_cover">
                                <div class="tile-icon">üìö</div>
                                <div class="tile-label">Subtopic Cover</div>
                            </div>
                            <div class="tile" data-value="tutero_ai">
                                <div class="tile-icon">ü§ñ</div>
                                <div class="tile-label">Tutero AI</div>
                            </div>
                            <div class="tile" data-value="classroom_activity">
                                <div class="tile-icon">üè´</div>
                                <div class="tile-label">Classroom Activity</div>
                            </div>
                            <div class="tile" data-value="context_introduction">
                                <div class="tile-icon">üåç</div>
                                <div class="tile-label">Context Intro</div>
                            </div>
                        </div>
                    </div>

                    <!-- Image Count Selection -->
                    <div class="selection-section hidden" id="count-section">
                        <label class="section-label">2. Number of Images</label>
                        <div class="tile-grid count-grid" id="count-grid">
                            <div class="tile count-tile selected" data-value="1">1</div>
                            <div class="tile count-tile" data-value="2">2</div>
                            <div class="tile count-tile" data-value="3">3</div>
                            <div class="tile count-tile" data-value="4">4</div>
                        </div>
                    </div>

                    <!-- Model Selection -->
                    <div class="selection-section hidden" id="model-section">
                        <label class="section-label">3. Select Models</label>
                        <div class="tile-grid model-grid" id="model-grid">
                            <div class="tile model-tile selected" data-value="google/gemini-2.5-flash-image-preview">
                                <div class="tile-icon">‚ö°</div>
                                <div class="tile-label">Gemini Flash</div>
                            </div>
                            <div class="tile model-tile" data-value="google/gemini-3-pro-image-preview">
                                <div class="tile-icon">üöÄ</div>
                                <div class="tile-label">Gemini Pro</div>
                            </div>
                        </div>
                    </div>

                    <!-- Instruction Input (Hidden initially) -->
                    <div class="input-group hidden" id="instruction-section">
                        <label for="user-input" class="section-label">4. Describe your image</label>
                        <textarea id="user-input" class="form-control" rows="4"
                            placeholder="Describe the specific scene, context, or activity..."></textarea>
                        <p class="help-text">Be specific about the context (e.g., "fractions", "basketball court",
                            "group work")</p>
                    </div>

                    <div class="button-group">
                        <button id="generate-btn" class="btn btn-primary" disabled>
                            <span class="btn-text">Generate Images</span>
                            <span class="btn-icon">‚ú®</span>
                        </button>
                    </div>
                </div>

                <div id="progress-section" class="progress-section" style="display: none;">
                    <div class="progress-bar-container">
                        <div id="progress-bar" class="progress-bar"></div>
                    </div>
                    <p id="progress-status" class="progress-status">Initializing...</p>
                </div>

                <div id="results-section" class="results-section" style="display: none;">
                    <h2>Generated Images</h2>
                    <div id="results-grid" class="results-grid"></div>

                    <div class="results-info">
                        <p id="results-summary"></p>
                    </div>
                </div>
                <!-- Edit Modal -->
                <div id="edit-modal" class="modal hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Refine Image</h3>
                            <button class="close-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p class="modal-description">Describe how you want to change this image:</p>
                            <textarea id="refine-input" class="form-control" rows="4"
                                placeholder="e.g., Make the background brighter, remove the text..."></textarea>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary close-modal">Cancel</button>
                            <button id="confirm-refine-btn" class="btn btn-primary">
                                <span class="btn-text">Refine</span>
                                <span class="btn-icon">‚ú®</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Follow-up Section (Legacy - can be removed or kept hidden) -->
                <div id="follow-up-section" class="follow-up-section hidden">
                    <!-- ... legacy content ... -->
                </div>

            </div>
        </main>


    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>